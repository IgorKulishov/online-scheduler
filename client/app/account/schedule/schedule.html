<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <div class="row">
  <div class="col-sm-12">
	<div ng-if="token == '0'">
   	    <ol>
	        <a class="btn-date" href="#/">Login</a>
	        <a class="btn-date" href="#/Users">Register</a>
	    </ol>
	    <h1>Thank you!</h1>
	    <img src="code/img/bye.jpg">
	    <h5>Please click 'Login' to login the system.</h5>
	</div>

    <!--<div ng-if="token && token != '0'">-->
    <div>
	    <nav class="navbar navbar-default">	
	        <div class="container-fluid">

			    <div class="row">
			        <div class="col-md-3">
			            <p class="input-group">
			              <input type="text" class="form-control" datepicker-popup="dd MMMM yyyy" ng-model="date" is-open="status" max-date="'22 6 2020'" ng-required="true" close-text="Close" ng-change="chooseDate(date)"/>
			              <span class="input-group-btn">
			                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
			              </span>
			            </p>
			        </div>
			    </div>
	   		</div>

        </nav>

	        <div class="row">

	        <!--    <div class="col-md-2 col2">
	                <h4>Username</h4>
	            </div>

	            <div class="col-md-2 col3">
	                <h4>Start</h4>
	            </div>

	            <div class="col-md-2 col7">
	                <h4>Finish</h4>
	            </div>

	            <div class="col-md-1 col4">
	                <h4>Task</h4>
	            </div>

	        </div>-->

	        <div class="row" ng-repeat="taskRecord in ctrl.taskListArray | orderBy:'username'">

	            <div class="col-md-2 col2">
	            <!--list of Tasks from taskListArray in JSON-->
		            <div ng-if="!taskRecord.isEditing && !taskRecord.existName" class="btn-group" dropdown dropdown-append-to-body>

			            <button type="button" class="btn" dropdown-toggle style="width:174px">
			                {{taskRecord.username}}
			                <i class="glyphicon glyphicon-user" style="color:red"></i>
			            </button>
					    <ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
				            <li role="menuitem"><a href="#">Replace</a></li>
				            <li role="menuitem"><a href="#">Personal info</a></li>				            
				            <li role="menuitem"><a href="#">Record issue</a></li>
				            <li class="divider"></li>
				            <li role="menuitem"><a href="#">Send message</a></li>
					    </ul>		            
                    </div>

		            <div ng-if="taskRecord.isEditing">
		            	<br>
		            	<br>
		                <input ng-model="taskRecord.username"/>
		            </div>
	            </div>   

	            <div class="col-md-2 col3">
	            <!--list of Tasks from taskListArray in JSON-->
	            
		            <div ng-if="!taskRecord.isEditing">
		                <h5>{{taskRecord.start}}</h5>
		            </div>

		            <div ng-if="taskRecord.isEditing">
		                <timepicker ng-model="taskRecord.start" ng-change="editStart()" hour-step="1" minute-step="15" show-meridian="ismeridian"></timepicker>
		            </div>
	            </div>

		        <div class="col-md-2 col6">
	            <!--list of Tasks from taskListArray in JSON-->
	            
		            <div ng-if="!taskRecord.isEditing">
		                <h5>{{taskRecord.finish}}</h5>
		            </div>

		            <div ng-if="taskRecord.isEditing">
   		                <timepicker ng-model="taskRecord.finish" ng-change="editFinish()" hour-step="1" minute-step="15" show-meridian="ismeridian"></timepicker>

		            </div>
	            </div>
	            <div class="col-md-2 col7">
	            <!--list of Tasks from taskListArray in JSON-->
		            <div ng-if="!taskRecord.isEditing" class="btn-group" dropdown is-open="status.isopen">
			            <button type="button" class="btn" dropdown-toggle style="width:195px; text-align:right">
			                {{taskRecord.task}} |
			                <i class="glyphicon glyphicon-ok-sign" style="color:blue"></i>
			            </button>
					    <ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
				            <li role="menuitem"><a href="#">Start task</a></li>
				            <li role="menuitem"><a href="#">Finish task</a></li>
				            <li role="menuitem"><a href="#">Pause task</a></li>
   				            <li class="divider"></li>
				            <li role="menuitem" ><a href="#" style="color:blue" ng-click="ctrl.edit(taskRecord._id)">Edit task</a></li>
				            <li role="menuitem" ><a href="#" style="color:red" ng-click="ctrl.delete(taskRecord._id)" >Delete task</a></li>
					    </ul>
		            </div>

		            <div ng-if="taskRecord.isEditing">
		            	<br>
		            	<br>
		                <input ng-model="taskRecord.task"/>
		            </div>

	            </div>
          
	            <!--print out 'Type's of each Task from taskListArray from controller-->
	            <div class="col-md-1 col4">
                 <!--if "taskRecord.isEditing == false" just read data from Aray-->
		            <div ng-if="!taskRecord.isEditing">
		                <h5>{{taskRecord.type}}</h5>
		            </div>
	            </div>
                <!--Save button-->
				<div class="col-md-1 col7" ng-if="taskRecord.isEditing">
					<br>
					<br>
				    <button type="button" class="btn" ng-click="ctrl.save(taskRecord._id)">Save</button>
				</div>

		    </div>
		    <div class="text-warning">
		    	<h5>{{ctrl.message}}</h5>
		    </div>
		    <nav class="navbar navbar-default">
		        <div class="container-fluid">
		            <div class="navbar-header">
	                    <div class="row">
	                        <div class="col-md-3 col1">
	                            <h4>Username</h4>
   	                            <br>
	                            <br>
	                            <div>
	                            <input ng-model="newTask.username" placeholder="username" style="width:161px">
	                            </div>
	                        </div>
	                        <div class="col-md-2 col2">
	                            <h4>Start</h4>
		                        <timepicker ng-model="newTask.start" ng-change="changedStart()" hour-step="1" minute-step="15" show-meridian="ismeridian"></timepicker>
	                        </div>
	                        <div class="col-md-2 col3">
	                            <h4>Finish</h4>
	                            <timepicker ng-model="newTask.finish" ng-change="changedFinish()" hour-step="1" minute-step="15" show-meridian="ismeridian"></timepicker>
	                        </div>
	                        <div class="col-md-1 col4">
	                            <h4>Task</h4>
   	                            <br>
	                            <br>
	                            <input ng-model="newTask.task"placeholder="Task.." style="width:200px">
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </nav>
	        <input type="button" ng-click="ctrl.addTask()" value="Add" class="add-button">
	    </div>
	</div>
	</div>
</div>

<footer class="footer">
  <div class="container">
      <p>Angular Fullstack v2.0.13 | Online scheduler v 0.8
        <!--<a href="https://twitter.com/tyhenkel">@tyhenkel</a> |
         <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a>--></p>
  </div>
</footer>